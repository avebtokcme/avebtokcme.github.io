import{u as R,_ as k,a as U,b as P,c as T}from"./useLanguage-ybbhK7e5.js";import{_ as W}from"./turntable.vue_vue_type_script_setup_true_lang-CHmvoRsT.js";import $ from"./account-DbHthloc.js";import{_ as D}from"./list.vue_vue_type_script_setup_true_lang-PVfd3v_c.js";import{u as E}from"./index-BkkXKtbl.js";import{_ as O}from"./entryPop.vue_vue_type_script_setup_true_lang-Df1P0agd.js";import{b as x,M as J,O as N,R as z,S as i,c as M,P as q,E as G,f as d,o as w,v,g as s}from"./vendor-D2DeR03v.js";import{s as V,t as C,a as j,g as A,b as F}from"./index-D5peRbjv.js";import{_ as H}from"./botLoginPop.vue_vue_type_script_setup_true_lang-CP5Y5awY.js";import"./close-icon-DbMxyuTq.js";import"./index.vue_vue_type_script_setup_true_lang-C8G8pr-B.js";const K={bot:1},Q={class:"min-h-screen",style:{background:"linear-gradient(180deg, #493ad4 0%, #852db5 100%)"}},X={key:0,class:"absolute w-full",src:U,alt:""},Y={key:1,class:"absolute w-full",src:P,alt:""},mt=x({__name:"index",setup(Z){const a=E(),{setLanguage:y}=R(),{t:r,locale:b}=J(),h=N(),u=z("dictJson",""),f=i(!1),n=i(!1),g=i(null),c=i(null),S=M(()=>b.value==="en");q(async()=>{var o;let e=location.search,t=new URLSearchParams(e),l=t.get("lang")||t.get("language")||((o=h.query)==null?void 0:o.lang)||"zh-cn";if(y(l==="zh-cn"?"zh":"en"),V(r("home.activityTitle")),document.title=r("home.activityTitle"),B(),f.value=!u.value,!u.value){const p=["utm_source","eid","pid","code"].reduce((_,m)=>(t.get(m)&&(_[m]=t.get(m)),_),{utm_source:"",eid:"",pid:"",code:""});await C(JSON.stringify({...p,category:"view"}))!=="0"&&(u.value=JSON.stringify(p))}});function L(){var e;return((e=window.bot_wallet)==null?void 0:e.walletType)==K.bot}async function B(){var e;if(console.log(window.bot_wallet,"钱包登录设置用户信息"),window.bot_wallet)if(L()){a.setUserInfo(window.bot_wallet);const t=await j(Date.now());a.setUserInfo({...a.userInfo,...t});return}else A().isIOS&&((e=window.bot_wallet)!=null&&e.tgUid)?F():(a.setUserInfo({}),a.amount=0,window.bot_wallet.walletType!==-1&&G(r("onlyBotLogin")))}const I=()=>{c.value&&c.value.handleDraw()};return(e,t)=>{var l;return w(),d("div",Q,[t[4]||(t[4]=v("img",{class:"absolute w-full",src:k,alt:""},null,-1)),S.value?(w(),d("img",X)):(w(),d("img",Y)),s(T),s(W,{ref_key:"turntableRef",ref:g,onShowBotLoginPop:t[0]||(t[0]=o=>n.value=!0),onGetLotteryWinhistory:I},null,512),s($,{onShowBotLoginPop:t[1]||(t[1]=o=>n.value=!0),onRefreshDashboard:(l=g.value)==null?void 0:l._getLotteryWinamount},null,8,["onRefreshDashboard"]),s(D,{ref_key:"listRef",ref:c},null,512),t[5]||(t[5]=v("div",{class:"h-50px"},null,-1)),s(O,{"is-show":f.value,"onUpdate:isShow":t[2]||(t[2]=o=>f.value=o)},null,8,["is-show"]),s(H,{"is-show":n.value,"onUpdate:isShow":t[3]||(t[3]=o=>n.value=o)},null,8,["is-show"])])}}});export{mt as default};
